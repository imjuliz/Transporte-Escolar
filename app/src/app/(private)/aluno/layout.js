"use client"
import './styles/layout.css';
import { useEffect, useState } from "react";
import Image from 'next/image'
import { usePathname } from 'next/navigation';

export default function AlunoLayout({ children }) {
    const pathname = usePathname();
    const isMapa = pathname.includes('minha-rota');
    // SIDEBAR
    const [sidebarActive, setSidebarActive] = useState(false);

    const toggleSidebar = () => {
        setSidebarActive(!sidebarActive);
    };

    const iconsNav =
    {
        rota: (<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <mask id="mask0_94_753" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
                <path d="M0 0H20V20H0V0Z" fill="white" />
            </mask>
            <g mask="url(#mask0_94_753)">
                <path d="M9.98939 0.00386047C6.67896 0.00386047 3.99565 2.44467 3.99565 5.45623C3.99565 8.476 7.59842 12.8224 9.21663 14.6236C9.6172 15.0689 10.3595 15.0689 10.76 14.6236C12.3793 12.8224 15.9829 8.476 15.9829 5.45623C15.9829 2.44467 13.2998 0.00386047 9.98939 0.00386047ZM9.98939 3.50918C11.172 3.50918 12.1297 4.38038 12.1297 5.45623C12.1297 6.53136 11.1709 7.40329 9.98939 7.40329C8.80757 7.40329 7.84911 6.53232 7.84911 5.45623C7.84911 4.38038 8.8065 3.50918 9.98939 3.50918ZM4.98886 13.2391C4.91193 13.2394 4.83314 13.2483 4.75462 13.2657C1.90285 13.9064 0 15.0525 0 16.3612C0 18.3686 4.47209 19.9961 9.98939 19.9961C15.5064 19.9961 19.9785 18.3686 19.9785 16.3612C19.9785 15.0525 18.0759 13.9074 15.2239 13.2676C14.5954 13.1267 13.985 13.5678 13.985 14.1567C13.985 14.5693 14.2869 14.9381 14.7265 15.037C16.5293 15.4442 17.6252 16.0086 17.93 16.3595C17.4156 16.9547 14.6782 18.177 9.98939 18.177C5.3003 18.177 2.56314 16.9547 2.04849 16.3595C2.35224 16.0077 3.44917 15.4442 5.25228 15.037C5.69159 14.9391 5.99347 14.5693 5.99347 14.1567C5.99347 13.6407 5.52658 13.2374 4.98886 13.2391Z" fill="currentColor" />
            </g>
        </svg>
        ),
        viagens: (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fillRule="evenodd" clipRule="evenodd" d="M10.0914 3.47693C10.2421 4.07969 9.87562 4.6905 9.27285 4.84119L4.125 6.12815V17.3089L8.72715 16.1584C9.32992 16.0077 9.94072 16.3742 10.0914 16.9769C10.2421 17.5797 9.87562 18.1905 9.27285 18.3412L3.27285 19.8412C2.93677 19.9252 2.58072 19.8497 2.30766 19.6365C2.03461 19.4233 1.875 19.0962 1.875 18.7498V5.24978C1.875 4.73355 2.22633 4.28357 2.72715 4.15837L8.72715 2.65837C9.32992 2.50768 9.94072 2.87416 10.0914 3.47693Z" fill="currentColor" />
                <path fillRule="evenodd" clipRule="evenodd" d="M8.40855 2.79302C8.74022 2.58804 9.15438 2.5694 9.50312 2.74377L15.5031 5.74377C15.8842 5.93434 16.125 6.32388 16.125 6.75V20.25C16.125 20.6399 15.9231 21.002 15.5914 21.207C15.2598 21.412 14.8456 21.4306 14.4969 21.2562L8.49688 18.2562C8.11575 18.0657 7.875 17.6761 7.875 17.25V3.75C7.875 3.3601 8.07688 2.998 8.40855 2.79302ZM10.125 5.57029V16.5547L13.875 18.4297V7.44529L10.125 5.57029Z" fill="currentColor" />
                <path fillRule="evenodd" clipRule="evenodd" d="M21.6924 4.36328C21.9654 4.57647 22.125 4.90358 22.125 5.25001V18.75C22.125 19.2662 21.7737 19.7162 21.2729 19.8414L15.2729 21.3414C14.6701 21.4921 14.0593 21.1256 13.9086 20.5229C13.7579 19.9201 14.1244 19.3093 14.7272 19.1586L19.875 17.8716V6.69088L15.2729 7.84142C14.6701 7.99211 14.0593 7.62563 13.9086 7.02286C13.7579 6.42009 14.1244 5.80929 14.7272 5.6586L20.7272 4.1586C21.0633 4.07458 21.4193 4.15008 21.6924 4.36328Z" fill="currentColor" />
            </svg>

        ),
        motoristas: (
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.0179 13.125C11.0179 12.2656 10.3348 11.5625 9.5 11.5625C8.62723 11.5625 7.98214 12.2656 7.98214 13.125C7.98214 14.0234 8.62723 14.6875 9.5 14.6875C10.3348 14.6875 11.0179 14.0234 11.0179 13.125ZM18 4.29688C18 1.79688 15.3058 0 12.7254 0H6.23661C3.6942 0 1 1.79688 1 4.29688V13.2422C1 15.1562 2.6317 16.7578 4.7567 17.3047L2.51786 19.6094C2.36607 19.7656 2.47991 20 2.66964 20H4.49107C4.64286 20 4.7567 19.9609 4.83259 19.8828L7.10938 17.5H11.8527L14.1295 19.8828C14.2054 19.9609 14.3192 20 14.471 20H16.2924C16.4821 20 16.596 19.7656 16.4442 19.6094L14.2054 17.3047C16.3304 16.7578 18 15.1562 18 13.2422V4.29688ZM2.82143 8.75V5.625H16.1786V8.75H2.82143ZM2.89732 3.75C3.31473 2.73438 4.7567 1.875 6.23661 1.875H12.7254C14.2433 1.875 15.6853 2.73438 16.0647 3.75H2.89732ZM16.1786 13.2422C16.1786 14.6484 14.1674 15.625 12.7254 15.625H6.23661C4.7567 15.625 2.82143 14.6484 2.82143 13.2422V10.625H16.1786V13.2422Z" fill="currentColor" />
            </svg>

        ),
        ajuda: (<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clipPath="url(#clip0_8_309)">
                <path d="M8.33337 7.50001C8.33337 7.01087 8.51582 6.69804 8.75533 6.49481C9.01297 6.27621 9.38618 6.14584 9.79171 6.14584C10.1972 6.14584 10.5704 6.27621 10.8281 6.49481C11.0676 6.69804 11.25 7.01087 11.25 7.50001C11.25 7.86432 11.1642 8.06657 11.0645 8.21615C10.9481 8.39066 10.7951 8.52827 10.5362 8.76099L10.4842 8.80768C10.2179 9.04738 9.86751 9.37142 9.60035 9.84342C9.32502 10.3298 9.16671 10.9176 9.16671 11.6667C9.16671 12.1269 9.5398 12.5 10 12.5C10.4603 12.5 10.8334 12.1269 10.8334 11.6667C10.8334 11.1658 10.9355 10.8681 11.0508 10.6644C11.1742 10.4463 11.3447 10.2756 11.5992 10.0465C11.6221 10.0259 11.6462 10.0044 11.6714 9.98191C11.8991 9.77892 12.2111 9.50088 12.4512 9.14065C12.7421 8.70429 12.9167 8.17737 12.9167 7.50001C12.9167 6.53082 12.5262 5.7499 11.9064 5.22396C11.3046 4.71339 10.532 4.47918 9.79171 4.47918C9.05141 4.47918 8.27878 4.71339 7.67704 5.22396C7.05718 5.7499 6.66671 6.53082 6.66671 7.50001C6.66671 7.96025 7.0398 8.33334 7.50004 8.33334C7.96028 8.33334 8.33337 7.96025 8.33337 7.50001Z" fill="currentColor" />
                <path d="M10.625 15.5598C10.9346 15.2192 10.9095 14.6922 10.569 14.3826C10.2284 14.073 9.70137 14.0981 9.39177 14.4386L9.38344 14.4478C9.07384 14.7883 9.09892 15.3153 9.43946 15.6249C9.78 15.9345 10.307 15.9095 10.6166 15.5689L10.625 15.5598Z" fill="currentColor" />
                <path fillRule="evenodd" clipRule="evenodd" d="M10 0.833344C4.9373 0.833344 0.833374 4.93727 0.833374 10C0.833374 15.0627 4.9373 19.1667 10 19.1667C15.0628 19.1667 19.1667 15.0627 19.1667 10C19.1667 4.93727 15.0628 0.833344 10 0.833344ZM2.50004 10C2.50004 5.85775 5.85778 2.50001 10 2.50001C14.1423 2.50001 17.5 5.85775 17.5 10C17.5 14.1423 14.1423 17.5 10 17.5C5.85778 17.5 2.50004 14.1423 2.50004 10Z" fill="currentColor" />
            </g>
            <defs>
                <clipPath id="clip0_8_309">
                    <rect width="20" height="20" fill="white" />
                </clipPath>
            </defs>
        </svg>
        ),
        perfil: (<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fillRule="evenodd" clipRule="evenodd" d="M10 2.5C8.89497 2.5 7.83516 2.93899 7.05376 3.72039C6.27236 4.50179 5.83337 5.5616 5.83337 6.66667C5.83337 7.77174 6.27236 8.83154 7.05376 9.61294C7.10873 9.66791 7.16507 9.72119 7.22272 9.77273C6.50895 10.0998 5.85185 10.5534 5.286 11.1193C4.03575 12.3695 3.33337 14.0652 3.33337 15.8333V16.6667C3.33337 17.1269 3.70647 17.5 4.16671 17.5C4.62694 17.5 5.00004 17.1269 5.00004 16.6667V15.8333C5.00004 14.5073 5.52682 13.2355 6.46451 12.2978C7.40219 11.3601 8.67396 10.8333 10 10.8333C11.3261 10.8333 12.5979 11.3601 13.5356 12.2978C14.4733 13.2355 15 14.5073 15 15.8333V16.6667C15 17.1269 15.3731 17.5 15.8334 17.5C16.2936 17.5 16.6667 17.1269 16.6667 16.6667V15.8333C16.6667 14.0652 15.9643 12.3695 14.7141 11.1193C14.1482 10.5534 13.4911 10.0998 12.7774 9.77273C12.835 9.72119 12.8914 9.66791 12.9463 9.61294C13.7277 8.83154 14.1667 7.77174 14.1667 6.66667C14.1667 5.5616 13.7277 4.50179 12.9463 3.72039C12.1649 2.93899 11.1051 2.5 10 2.5ZM8.23227 4.8989C8.70111 4.43006 9.337 4.16667 10 4.16667C10.6631 4.16667 11.299 4.43006 11.7678 4.8989C12.2366 5.36774 12.5 6.00363 12.5 6.66667C12.5 7.32971 12.2366 7.96559 11.7678 8.43443C11.299 8.90327 10.6631 9.16667 10 9.16667C9.337 9.16667 8.70111 8.90327 8.23227 8.43443C7.76343 7.96559 7.50004 7.32971 7.50004 6.66667C7.50004 6.00363 7.76343 5.36774 8.23227 4.8989Z" fill="currentColor" />
        </svg>
        )

    };

    const links = [
        { href: '/aluno/minha-rota', name: 'rota', page: 'Minha Rota' },
        { href: '/aluno/viagens', name: 'viagens', page: 'Viagens' },
        { href: '/aluno/motoristas', name: 'motoristas', page: 'Motoristas' },
        { href: '/ajuda', name: 'ajuda', page: 'Ajuda' },
        { href: '/aluno/perfil', name: 'perfil', page: 'Meu Perfil' }
    ];

    //logout
    const logout = () => {
        localStorage.removeItem("usuario"); // remove os dados do usu√°rio
        window.location.href = "/login"; // redireciona p pag de login
    };

    return (
        <>
            <header>
                <div className={`sidebar ${sidebarActive ? 'active' : ''}`}>
                    <div className="logoContent flex flex-nowrap gap-4 items-center">
                        <Image
                            src="/img/fotoPerfil.png"
                            width={100}
                            height={100}
                            alt="Foto de perfil"
                            className='fotoPerfil'
                        />
                        <div className="logo flex flex-col">
                            <p className="logoName">Aluno</p>
                            <h4 className='nomepessoa'>nome</h4>
                        </div>
                        <i className='bx bx-menu' id="btn" onClick={toggleSidebar}><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="0.5" y="0.5" width="27" height="27" rx="7.5" fill="#161A23" />
                            <rect x="0.5" y="0.5" width="27" height="27" rx="7.5" stroke="#2D2F39" />
                            <path d="M16.4715 10.4714C16.7318 10.2111 16.7318 9.78895 16.4715 9.5286C16.2111 9.26825 15.789 9.26825 15.5287 9.5286L11.5287 13.5286C11.2683 13.7889 11.2683 14.2111 11.5287 14.4714L15.5287 18.4714C15.789 18.7318 16.2111 18.7318 16.4715 18.4714C16.7318 18.2111 16.7318 17.7889 16.4715 17.5286L12.9429 14L16.4715 10.4714Z" fill="white" fillOpacity="0.8" />
                        </svg>
                        </i>
                    </div>
                    <ul className="navList">
                        {links.map(({ href, name, page }) => (
                            <li className="navList-item text-[#999999] hover:text-[#ffc01d] transition-colors duration-200" key={name}>
                                <a href={href}>
                                    {iconsNav[name]}
                                    <span className="linksNames">{page}</span>
                                </a>
                                <span className="tooltip">{page}</span>
                            </li>
                        ))}
                    </ul>
                    <div className="profileContent">
                        <div className="profile">
                            <button type='submit' className="btn-sair group flex flex-row gap-3 items-center" onClick={logout}>
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11 1H13C14.1046 1 15 1.89543 15 3L15 13C15 14.1046 14.1046 15 13 15H11M1 8H11M11 8L9 10M11 8L9 6" stroke="#757575" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="group-hover:stroke-[#FF0000] transition-colors duration-200" />
                                </svg>
                                <p className="text-[#757575] group-hover:text-[#FF0000] transition-colors duration-200">Sair</p>
                            </button>
                        </div>
                    </div>
                </div>
            </header>
            <main className={`main-content justify-items-center ${sidebarActive ? 'collapsed' : ''} ${isMapa ? 'p-0' : 'px-[12%]'}`}>
                {children}
            </main>
        </>
    );
}
